.trait-chip {
  position: relative;
  cursor: help;
  overflow: visible !important;
}

// Tooltip is portaled to document.body, so styles are standalone
.trait-tooltip {
  // position: fixed is set via inline style
  transform: translateX(-50%) translateY(-100%) translateY(-10px);
  font-family: 'Press Start 2P', monospace;
  width: min(340px, 76vw);
  padding: 10px 11px;
  border-radius: 8px;
  border: 1px solid rgba(214, 191, 132, 0.5);
  background:
    linear-gradient(145deg, rgba(58, 40, 74, 0.98) 0%, rgba(20, 14, 29, 0.99) 60%) !important;
  background-color: rgba(20, 14, 29, 0.99) !important;
  color: rgba(244, 236, 218, 0.96);
  box-shadow:
    0 10px 24px rgba(0, 0, 0, 0.48),
    inset 0 1px 0 rgba(255, 241, 208, 0.16);
  z-index: 99999;
  pointer-events: none;
  text-transform: none;
  letter-spacing: 0.2px;
  overflow: visible !important;
  line-height: 1.25;
  opacity: 0;
  transition: opacity 0.15s ease;

  &.visible {
    opacity: 1;
  }

  &::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 100%;
    width: 10px;
    height: 10px;
    transform: translate(-50%, -45%) rotate(45deg);
    background: rgba(24, 16, 34, 0.99);
    border-right: 1px solid rgba(214, 191, 132, 0.45);
    border-bottom: 1px solid rgba(214, 191, 132, 0.45);
  }

  .trait-tooltip-head,
  .trait-tooltip-summary,
  .trait-tooltip-section {
    display: block;
  }

  .trait-tooltip-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    margin-bottom: 5px;
    padding-bottom: 5px;
    border-bottom: 1px solid rgba(214, 191, 132, 0.2);
  }

  .trait-tooltip-title {
    font-size: 11px;
    font-weight: 700;
    color: rgba(252, 234, 174, 0.98);
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
  }

  .trait-tooltip-scope {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 6px;
    border-radius: 999px;
    border: 1px solid rgba(210, 190, 138, 0.35);
    background: rgba(200, 170, 110, 0.14) !important;
    font-size: 8px;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    color: rgba(245, 232, 200, 0.96);

    .scope-icon {
      font-size: 8px;
      opacity: 0.9;
    }

    &.scope-character { color: #8fd3ff; border-color: rgba(143, 211, 255, 0.45); background: rgba(70, 120, 170, 0.22) !important; }
    &.scope-role, &.scope-room { color: #bff5c8; border-color: rgba(191, 245, 200, 0.45); background: rgba(70, 130, 90, 0.22) !important; }
    &.scope-archetype { color: #fbbf24; border-color: rgba(251, 191, 36, 0.45); background: rgba(140, 110, 30, 0.24) !important; }
    &.scope-situational { color: #ffe5ab; border-color: rgba(255, 229, 171, 0.45); background: rgba(140, 110, 50, 0.24) !important; }
  }

  .trait-tooltip-summary {
    font-size: 10px;
    line-height: 1.4;
    margin-bottom: 7px;
    color: rgba(236, 227, 205, 0.94);
  }

  .trait-tooltip-section {
    margin-top: 6px;

    .section-label {
      display: block;
      font-size: 8px;
      text-transform: uppercase;
      letter-spacing: 0.7px;
      color: rgba(255, 218, 139, 0.96);
      margin-bottom: 3px;
    }

    ul {
      margin: 0;
      padding-left: 12px;
      list-style: none;
    }

    li {
      position: relative;
      margin: 0 0 2px;
      font-size: 9px;
      line-height: 1.35;
      color: rgba(226, 215, 191, 0.92);

      &::before {
        content: 'â–¸';
        position: absolute;
        left: -10px;
        color: rgba(255, 214, 129, 0.8);
      }
    }
  }
}

.char-profile-screen .char-bio-panel .char-bio-section,
.char-profile-screen .char-bio-panel .char-trait-list,
.role-modal .role-preview,
.role-modal .role-preview-section,
.role-modal .role-preview-traits,
.role-buffs-section .role-trait-row,
.role-buffs-section .role-trait-chip-row {
  overflow: visible !important;
}
