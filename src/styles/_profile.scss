// ==========================================
// Shared Character Profile Screen
// (used by PC Profile, Hero detail, Servant detail)
// ==========================================
.char-profile-screen {
  width: 100%;
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  background: radial-gradient(ellipse at center, rgba(40, 30, 50, 0.97) 0%, rgba(18, 12, 24, 0.99) 100%) !important;

  .char-profile-content {
    flex: 1;
    display: flex;
    gap: 24px;
    padding: 24px;
    min-height: 0;
    overflow: hidden;
    max-height: 100%;
  }

  .char-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    flex-shrink: 0;
    overflow-y: auto;
    max-height: 100%;
    padding-bottom: 16px;

    .char-avatar-frame {
      width: 210px;
      height: 350px;
      flex-shrink: 0;
      border-radius: 6px;
      overflow: hidden;
      border: 2px solid rgba(200, 170, 110, 0.3);
      box-shadow:
        0 0 0 3px rgba(30, 22, 36, 0.8),
        0 0 0 5px rgba(200, 170, 110, 0.12),
        0 4px 20px rgba(0, 0, 0, 0.4);

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }

    .char-info {
      flex-shrink: 0;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 6px;

      .char-name {
        margin: 0;
        font-size: 18px;
        color: var(--char-color, var(--highlight));
      }

      .char-title {
        font-size: 10px;
        color: color-mix(in srgb, var(--char-color, var(--accent-primary)) 80%, #fff);
        text-transform: uppercase;
        letter-spacing: 1.5px;
      }

      .char-status-badge {
        font-size: 9px;
        text-transform: capitalize;
        padding: 3px 10px;
        border-radius: 10px;
        align-self: center;

        &.status-free { color: #5a8aaa; background: rgba(90, 138, 170, 0.2); }
        &.status-encountered { color: #aa8a5a; background: rgba(170, 138, 90, 0.2); }
        &.status-captured { color: #aa5a5a; background: rgba(170, 90, 90, 0.2); }
        &.status-converting { color: var(--accent-primary); background: rgba(200, 170, 110, 0.12); }
        &.status-servant { color: #5aaa5a; background: rgba(90, 170, 90, 0.2); }
      }

      .char-role-badge {
        font-size: 9px;
        padding: 4px 12px;
        border-radius: 10px;
        align-self: center;
        border: 1.5px solid;
        background: rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        gap: 4px;
        font-weight: 500;
        letter-spacing: 0.5px;
      }
    }

    .char-action-btns {
      flex-shrink: 0;
      display: flex;
      gap: 6px;
      justify-content: center;
      margin-top: 8px;
    }

    .gallery-open-btn {
      background: rgba(200, 170, 110, 0.06);
      color: rgba(200, 170, 110, 0.7);
      border: 1px solid rgba(200, 170, 110, 0.2);
      padding: 5px 14px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 8px;
      letter-spacing: 1px;
      text-transform: uppercase;
      transition: all 0.25s;

      &:hover {
        background: color-mix(in srgb, var(--char-color, var(--highlight)) 20%, rgba(200, 170, 110, 0.12));
        border-color: var(--char-color, var(--highlight));
        transform: translateY(-1px);
      }

      &.chat-btn {
        color: rgba(130, 200, 170, 0.8);
        border-color: rgba(130, 200, 170, 0.2);

        &:hover {
          background: rgba(130, 200, 170, 0.12);
          border-color: rgba(130, 200, 170, 0.5);
        }
      }
    }

    &::-webkit-scrollbar {
      width: 6px;
    }
    &::-webkit-scrollbar-track {
      background: rgba(20, 15, 25, 0.4);
      border-radius: 3px;
    }
    &::-webkit-scrollbar-thumb {
      background: rgba(200, 170, 110, 0.25);
      border-radius: 3px;
    }
  }

  .char-bio-panel {
    flex: 1;
    min-height: 0;
    max-height: 100%;
    overflow-y: auto !important;
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding-right: 4px;
    padding-bottom: 16px;

    &::-webkit-scrollbar {
      width: 6px;
    }
    &::-webkit-scrollbar-track {
      background: rgba(20, 15, 25, 0.4);
      border-radius: 3px;
    }
    &::-webkit-scrollbar-thumb {
      background: rgba(200, 170, 110, 0.25);
      border-radius: 3px;
    }

    .char-bio-section {
      flex-shrink: 0;
      background:
        linear-gradient(135deg, rgba(240, 230, 210, 0.02) 25%, transparent 25%),
        rgba(200, 170, 110, 0.03) !important;
      border: 1px solid rgba(200, 170, 110, 0.1);
      border-radius: 6px;
      padding: 16px;

      h4 {
        margin: 0 0 10px 0;
        color: var(--char-color, var(--accent-primary));
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 1px;
        padding-bottom: 6px;
        border-bottom: 1px solid rgba(200, 170, 110, 0.1);
      }

      p {
        margin: 0;
        font-size: 11px;
        line-height: 1.8;
        color: var(--text-secondary);
      }

      .char-detail-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid rgba(200, 170, 110, 0.06);

        &:last-child {
          border-bottom: none;
        }

        .char-detail-label {
          font-size: 10px;
          color: var(--text-muted);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .char-detail-value {
          font-size: 11px;
          color: var(--char-color, var(--highlight));
          font-weight: bold;

          &.char-gender-value {
            display: flex;
            align-items: center;
            gap: 6px;

            .gender-symbol {
              font-size: 18px;
              line-height: 1;
              font-family: 'Press Start 2P', monospace;
            }
          }
        }
      }

      .char-stat-block {
        display: flex;
        flex-direction: column;
        gap: 12px;

        .stat-row {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 10px 12px;
          background: rgba(0, 0, 0, 0.2);
          border: 1px solid rgba(200, 170, 110, 0.08);
          border-radius: 6px;
          transition: all 0.2s ease;

          &:hover {
            background: rgba(0, 0, 0, 0.3);
            border-color: rgba(200, 170, 110, 0.15);
            transform: translateX(2px);
          }

          .stat-row-left {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 160px;

            .stat-grade-letter {
              font-size: 14px;
              font-weight: 700;
              letter-spacing: 1px;
              font-family: 'Press Start 2P', 'Courier New', monospace;
              text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.8);
              min-width: 38px;
            }

            .stat-name {
              font-size: 11px;
              font-weight: 600;
              text-transform: uppercase;
              letter-spacing: 1px;
            }
          }

          .stat-row-right {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            flex: 1;

            .stat-blocks-container {
              display: flex;
              gap: 3px;

              .stat-block {
                width: 14px;
                height: 14px;
                border: 1px solid;
                border-radius: 0;
                image-rendering: pixelated;
                image-rendering: -moz-crisp-edges;
                image-rendering: crisp-edges;

                &:not(.filled) {
                  background: rgba(0, 0, 0, 0.4) !important;
                }
                
                &.filled {
                  background: var(--stat-fill-color) !important;
                  box-shadow: inset 1px 1px 0 rgba(255, 255, 255, 0.4),
                              inset -1px -1px 0 rgba(0, 0, 0, 0.4);
                }
              }
            }
          }
        }
      }

      .char-conversion-bar {
        width: 100%;
        height: 18px;
        background: rgba(20, 15, 25, 0.6) !important;
        border-radius: 9px;
        position: relative;
        overflow: hidden;
        margin-top: 8px;

        .char-conversion-fill {
          height: 100%;
          background: linear-gradient(90deg, var(--accent-primary), var(--highlight)) !important;
          transition: width 0.3s ease;
        }

        .char-conversion-text {
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 9px;
          font-weight: bold;
          color: #fff;
          text-shadow: 0 0 3px rgba(0,0,0,0.8);
        }
      }

      // Love & Obedience stat bars (profile view)
      .servant-stat-bars {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-top: 10px;
      }

      .servant-stat-bar {
        display: flex;
        align-items: center;
        gap: 8px;

        .servant-stat-bar-label {
          font-size: 8px;
          color: var(--text-muted);
          text-transform: uppercase;
          letter-spacing: 0.5px;
          width: 74px;
          flex-shrink: 0;
        }

        .servant-stat-bar-track {
          flex: 1;
          height: 10px;
          background: rgba(20, 15, 25, 0.6) !important;
          border-radius: 5px;
          overflow: hidden;
        }

        .servant-stat-bar-fill {
          height: 100%;
          transition: width 0.3s ease;
        }

        .servant-stat-bar-value {
          font-size: 8px;
          font-weight: bold;
          color: var(--text-secondary);
          width: 32px;
          text-align: right;
          flex-shrink: 0;
        }

        &.love-bar .servant-stat-bar-fill {
          background: linear-gradient(90deg, #8b3a5a, #e8789c) !important;
        }

        &.obedience-bar .servant-stat-bar-fill {
          background: linear-gradient(90deg, #3a4e8b, #7898e8) !important;
        }
      }

      .conditioned-badge {
        margin-top: 8px;
        font-size: 8px;
        color: rgba(212, 168, 67, 0.7);
        text-align: center;
        padding: 4px 10px;
        border-radius: 10px;
        border: 1px solid rgba(212, 168, 67, 0.2);
        background: rgba(212, 168, 67, 0.06) !important;
        letter-spacing: 0.5px;
      }
    }

    .char-trait-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;

      .char-trait {
        font-size: 8px;
        padding: 4px 10px;
        background: rgba(200, 170, 110, 0.06);
        border: 1px solid rgba(200, 170, 110, 0.15);
        border-radius: 4px;
        color: rgba(200, 170, 110, 0.7);
        letter-spacing: 0.5px;
      }

      // Innate character traits - solid border, gemstone-like decoration
      .char-trait-innate {
        background: rgba(var(--char-color-rgb, 200, 170, 110), 0.1);
        border-width: 1.5px;
        border-style: solid;
        font-weight: 500;
        position: relative;
        padding-left: 16px;

        &::before {
          content: '◆';
          position: absolute;
          left: 5px;
          opacity: 0.6;
        }
      }

      // Role-granted traits - dashed border, badge-like decoration
      .char-trait-role {
        background: rgba(var(--role-color-rgb, 200, 170, 110), 0.08);
        border-width: 1.5px;
        border-style: dashed;
        font-weight: 400;
        font-style: italic;
        position: relative;
        padding-left: 16px;

        &::before {
          content: '★';
          position: absolute;
          left: 5px;
          opacity: 0.5;
          font-style: normal;
        }
      }
    }
  }
}

